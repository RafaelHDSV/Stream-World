@model StreamWorld.Models.Artist

@{
    ViewData["Title"] = "Detalhes do Artista";
}

<h2 class="mb-4">@Model.name</h2>

<div class="row">
    <!-- CAPA -->
    <div class="col-md-4">
        <img src="@(string.IsNullOrEmpty(Model.photo) ? "/images/no-image.jpg" : Model.photo)"
             alt="Capa"
             class="img-fluid rounded shadow" />
    </div>

    <!-- INFORMAÇÕES -->
    <div class="col-md-8">
        <h4>Informações Gerais</h4>
        <hr />

        <p><strong>@Html.DisplayNameFor(model => model.name):</strong> @Html.DisplayFor(model => model.name)</p>
        <p><strong>@Html.DisplayNameFor(model => model.birthdate):</strong> @Html.DisplayFor(model => model.birthdate)</p>
        <p><strong>@Html.DisplayNameFor(model => model.countryBirth):</strong> @Html.DisplayFor(model => model.countryBirth)</p>

        <!-- PARTICIPAÇÕES -->
        <div class="mt-1">
            <strong>Participações em Obras:</strong>

            @if (Model.productionsArtists != null && Model.productionsArtists.Any())
            {
                <ul class="list-group">
                    @foreach (var pa in Model.productionsArtists)
                    {
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>@pa.production?.titulo</strong>
                                <br />
                                <span class="text-muted">Personagem: @pa.characterName</span>
                            </div>
                            <a asp-controller="Productions"
                                asp-action="Details"
                                asp-route-id="@pa.productionId"
                                class="btn btn-sm btn-outline-primary">
                                Ver Obra
                            </a>
                        </li>
                    }
                </ul>
            }
            else
            {
                <p class="text-muted">Nenhuma participação registrada.</p>
            }
        </div>
    
        <div class="mt-5">
            <a asp-action="Edit" asp-route-id="@Model?._id" class="btn btn-primary">Editar</a>
            <a asp-action="Search" class="btn btn-secondary">Voltar</a>
        </div>
    </div>
</div>