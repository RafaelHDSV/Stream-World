@model StreamWorld.Models.Production

@{
    ViewData["titulo"] = "Detalhes da Obra";
}

<h2 class="mb-4">@Model.titulo</h2>

<div class="row">
    <!-- CAPA -->
    <div class="col-md-4">
        <img src="@(string.IsNullOrEmpty(Model.coverPhoto) ? "/images/no-image.jpg" : Model.coverPhoto)"
             alt="Capa"
             class="img-fluid rounded shadow" />
    </div>

    <!-- INFORMAÇÕES -->
    <div class="col-md-8">

        <h4>Informações Gerais</h4>
        <hr />

        <p><strong>Título:</strong> @Model.titulo</p>

        <p><strong>Tipo:</strong> @Model.type</p>

        <p><strong>Ano de lançamento:</strong> @Model.releaseDate.ToString("yyyy")</p>

        <p><strong>Diretor:</strong> @Model.director</p>

        <p>
            <strong>Gêneros:</strong>
            @if (Model.productionsGenres != null && Model.productionsGenres.Any())
            {
                @string.Join(", ", Model.productionsGenres.Select(g => g.genres.name))
            }
            else
            {
                <span>—</span>
            }
        </p>

        <h4 class="mt-4">Artistas Participantes</h4>
        <hr />

        @if (Model.productionsArtists != null && Model.productionsArtists.Any())
        {
            <ul>
            @foreach (var pa in Model.productionsArtists)
            {
                <li>
                    <strong>@pa.artists?.name</strong>
                    @if (!string.IsNullOrWhiteSpace(pa.characterName))
                    {
                        <span> como <em>@pa.characterName</em></span>
                    }
                </li>
            }
            </ul>
        }
        else
        {
            <p>Nenhum artista vinculado.</p>
        }


        <div class="mt-4">
            @if (User.Identity!.IsAuthenticated)
            {
                <a asp-action="Edit" asp-route-id="@Model._id" class="btn btn-primary">Editar</a>
            }
            <a asp-action="Search" class="btn btn-secondary">Voltar</a>
        </div>
    </div>
</div>
